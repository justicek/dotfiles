#!/bin/bash

## change this to the top-level directory containing the standards csv files
TOP_DIR="/home/pie/promethean/resources/mdredux"

## rename column headers and correct any unaccepted chars/strings
find $TOP_DIR -type f -exec sed -i -e '1 s/,asn_uri/,ASN_URI/' -e '1 s/,name/,Name/' -e '1 s/,short_name/,ShortName/' -e '1 s/,description/,Description/' -e '1 s/,jurisdiction_id/,JurisdictionID/' -e '1 s/,title/,Title/' -e '1 s/,creator/,Creator/' -e '1 s/,learning_standard_id/,LearningStandardID/' -e '1 s/,standard_text/,StandardText/' -e '1 s/,active/,Active/' -e '1 s/,code/,Code/' -e '1 s/,prereq_standard_item_id/,PrereqStandardItemID/' -e '1 s/,label/,Label/' -e '1 s/,version/,Version/' -e '1 s/,start_date/,StartDate/' -e '1 s/,thru_date/,ThruDate/' -e '1 s/,ref_blooms_taxonomy_id/,BloomsTaxonomyID/' -e '1 s/,tags/,Tags/' -e '1 s/,concept_term/,ConceptTerm/' -e '1 s/,ref_howard_earl_taxonomy_id/,HowardEarlTaxonomyID/' -e '1 s/,notes/,Notes/' -e '1 s/,parent_code/,ParentCode/' -e '1 s/,parent_standard_item_id/,ParentStandardItemID/' -e '1 s/,ref_complexity_system_id/,ComplexitySystemID/' -e '1 s/,complexity_min_value/,ComplexityMinValue/' -e '1 s/,complexity_max_value/,ComplexityMaxValue/' -e '1 s/,sort_seq/,SortSeq/'  -e '1 s/,item_ordinal/,ItemOrdinal/' -e '1 s/,year/,Year/' -e '1 s/,subject_id/,SubjectID/' -e '1 s/,language_id/,LanguageID/' -e '1 s/,alt_code/,AltCode/' -e '1 s/,authority_guid/,AuthorityGUID/' -e '1 s/,authority_url/,AuthorityURL/' -e '1 s/learning_standard_item_id/LearningStandardItemID/' -e '1 s/,educationlevel_id/,EducationLevelID/' -e 's/NULL//g' -e 's/\\N//g' -e 's/—/-/g' -e 's/‐/-/g' -e 's/–/-/g' -e 's/−/-/g' -e 's/×/*/g' -e 's/÷/\//g' -e 's/…/.../g' -e 's/\\"/""/g' -e 's/²/^2/g' -e 's/³/^3/g' -e 's/√/sqrt /g' -e 's/π/pi/g' -e 's/≠/!=/g' -e 's/★/*/g' -e 's/Ï€Â/pi/g' -e 's/Â//g' -e 's/âˆš/sqrt/g' -e 's/â‰/!=/g' -e 's/â˜?/?/g' -e 's/≥/>=/g' -e 's/∞/infinity/g' {} \;